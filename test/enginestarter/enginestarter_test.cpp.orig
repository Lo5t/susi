#include "gtest/gtest.h"
#include "enginestarter/EngineStarter.h"
#include "iocontroller/IOController.h"

#include <Poco/File.h>
#include <Poco/Path.h>

TEST(EngineStarter, Execute) {
	IOController io;
	Poco::Path tmp(Poco::Path::temp());
	tmp.append("enginestarterTestDir/");
	Poco::File d(tmp);
	d.createDirectories();
	Poco::File testFile(tmp.append("test.sh"));
	io.writeFile(tmp.toString(),"#/bin/bash\necho foobar > "+tmp.append()+"\nexit 0\n");
	f.setExecutable(true);
	Susi::EngineStarter es(Poco::Path::temp().append("enginestarterTestDir/"));
	es.execute();
}
